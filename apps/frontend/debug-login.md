# 登录错误调试指南

## 已修复的问题

### 1. API 参数名称不匹配
- **问题**: `auth.ts` 中使用 `passwordHash` 参数，但传递的是 `password`
- **修复**: 将参数名统一为 `password`

### 2. Token 存储不一致
- **问题**: user store 中使用 `token`，但 API 和 localStorage 使用 `accessToken`
- **修复**: 统一使用 `accessToken`

### 3. 错误处理不完善
- **问题**: 只有简单的错误提示，无法区分具体错误类型
- **修复**: 添加详细的错误处理逻辑，针对不同的 HTTP 状态码提供具体的错误信息

### 4. API 响应拦截器过于严格
- **问题**: 响应拦截器会抛出错误，阻止在组件中处理响应
- **修复**: 简化响应拦截器，让组件自行处理业务逻辑

## 调试步骤

1. 打开浏览器开发者工具
2. 切换到 Network 标签页
3. 尝试登录
4. 查看请求详情：
   - 请求 URL: `/api/auth/login`
   - 请求方法: `POST`
   - 请求体应包含: `{"username": "用户输入", "password": "用户输入"}`

## 可能的错误类型

- **400**: 请求参数错误 - 检查用户名和密码格式
- **401**: 用户名或密码错误 - 检查凭据是否正确
- **403**: 账户已被禁用 - 联系管理员
- **500**: 服务器内部错误 - 检查后端服务状态
- **网络错误**: 检查网络连接和 API 服务器是否可访问

## 下一步

如果仍然遇到错误，请检查：
1. 后端 API 服务是否正常运行
2. API 基础 URL (`VITE_API_URL`) 是否正确配置
3. 网络连接是否正常
4. 控制台是否有其他错误信息
